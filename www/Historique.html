<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
<<<<<<< Updated upstream
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <link rel="stylesheet" href="css/all.min.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body onload="afficherHistorique()">
=======
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
        <link rel="stylesheet" href="css/all.min.css">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/style.css">
    </head>
    <script>
        function afficherHistorique() {
            var today = new Date();
            var day = today.getDate();
            var month = today.getMonth()+1;
            var year = today.getFullYear();
            var datesStart=[];
            var todayDate= formatDate("".concat(year,"-",month,"-",day));
            todayDate = todayDate.replace(/\b0/g, '');
            let db = window.openDatabase("Events00000000", "1.0", "All Deadlines", 2000000);
            db.transaction(function (tx) {
                tx.executeSql('Select * from events where start < "?" order by start ', [ todayDate ], function (tx, result) {
                    console.log(result);
                    for(let i=0; i<result.rows.length; i++){                      
                        datesStart.push(result.rows[i]);
                        datesStart[i].start=formatDate(result.rows[i].start);
                        datesStart.sort(function(a,b){
                            if(a.start<b.start){
                                return -1;
                            }
                            if(a.start>b.start){
                                return 1;
                            }
                            return 0;
                        })
                    }                               
                $("#body").append('<table class="modal-dialog"><tr class="modal-dialog"><td class="modal-dialog"><h6>Titre</h6></td><td><h6>Description</h6></td><td><h6>Début</h6></td><td><h6>Fin</h6></td></tr>');
                    for (let i = 0; i<datesStart.length; i++) { 
                        $("table").append("<tr class='modal-body'><td class='modal-body'>"+datesStart[i].title+"</td><td>"+datesStart[i].content+"</td><td>"+datesStart[i].start+"</td><td>"+datesStart[i].end+"</td></tr></table>")              
                     }
                });
            }, function (error) {
                console.log('Transaction ERROR: ' + error.message);
            }, function () {      
            });
        }
        function orderByStart(){
            
        }
        function formatDate(date) {
            var dateN;
           
            if (date.length == 9) {
                if ((date.lastIndexOf("-")) - (date.indexOf("-")) < 3) {
                    dateN = date.substr(0, 5).concat("0", date.substr(5, 8));
                }
                else {
                    dateN = date.substr(0, 8).concat("0", date.substr(8, 8));
                }
            }
            if (date.length == 8) {
                var an = date.substr(0, 5);
                var mois = "0".concat(date.substr(5, 2));
                var jour = "0".concat(date.substr(7, 8));
                dateN = an.concat(mois, jour);
            }
            if(date.length==10){
                dateN=date;
            }
            return dateN;
        }
    </script>
    </head>
    <body onload="afficherHistorique()">
>>>>>>> Stashed changes
        <header class="navbar navbar-dark bg-primary">
            <!-- Bouton retour en SVG inline -->
            <svg onclick="window.location='home.html';" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" fill="white"/></svg>
            <span class="navbar-brand mb-0 h1">Historique</span>
        </header>
        <div id="body" class="container-fluid" >
            <h5>Deadlines Passées</h5>
        </div>
<<<<<<< Updated upstream

    <script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/historique.js"></script>
</body>
=======
        <script src="js/jquery.min.js"></script>
        <script src="js/popper.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
    </body>
>>>>>>> Stashed changes
</html>